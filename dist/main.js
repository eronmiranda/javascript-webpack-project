(()=>{"use strict";const e="YOUR_API_KEY",t="https://api.openweathermap.org/data/2.5/",a=function(e){this.city="",this.weatherData={},e&&Object.assign(this,e)};a.prototype.getCurrentWeather=function(){return fetch(`${t}weather?q=${this.city}&units=metric&appid=${e}`).then((e=>e.json())).then((e=>{const t=`${e.name}, ${e.sys.country}`,a=new Date(1e3*+e.dt),n=e.weather[0].main,c=e.main.temp,r=new Date(1e3*+e.sys.sunrise),l=new Date(1e3*+e.sys.sunset);return Object.assign(this.weatherData,{location:t,date:a,conditions:n,temperature:c,sunrise:r,sunset:l})}))},a.prototype.getForecast=function(){return fetch(`${t}forecast?q=${this.city}&units=metric&appid=${e}`).then((e=>e.json())).then((e=>{let t,a,n=-1,c=[];return e.list.forEach((e=>{let{dt_txt:r}=e,{temp_max:l,temp_min:s}=e.main,{main:i}=e.weather[0];a=r.split(" ")[0],t!==a&&(t=a,n+=1,c.push({condition:i,date:t,high:l,low:s})),c[n].high<l&&(c[n].high=l),c[n].low>s&&(c[n].low=s)})),Object.assign(this.weatherData,{forecast:c})}))};const n=e=>{const[t,n]=React.useState(""),[c,r]=React.useState(""),l=t=>{e.setWeatherData({}),r(t)};return React.createElement("div",null,React.createElement("h2",null,"Search Weather for a City"),React.createElement("form",{onSubmit:n=>{if(n.preventDefault(),""===t)return void l("please enter a city.");let c=new a({city:t});c.getCurrentWeather().then((e=>c.getForecast())).then((t=>{e.setWeatherData(t)})).catch((e=>{console.log(e),l("Invalid city please enter a new one.")}))},className:"frm weather md-form"},React.createElement("label",{for:"location"},"Location"),React.createElement("input",{type:"text",id:"location",name:"location",className:"form-control",value:t,onChange:e=>{r(""),n(e.target.value)}}),React.createElement("button",{className:"btn btn-primary",type:"submit"},"Get Weather"),""!==c&&React.createElement("div",{class:"alert alert-danger",role:"alert"},c)))},c=e=>{let{weatherData:t}=e;return React.createElement(React.Fragment,null,void 0!==t&&"location"in t?React.createElement(React.Fragment,null,React.createElement("h2",null,"WeatherDisplay"),React.createElement("div",{className:"details"},"Location: ",t.location),React.createElement("div",{className:"details"},"Date: ",t.date.toString()),React.createElement("div",{className:"details"},"Temperature: ",t.temperature," celsius"),React.createElement("div",{className:"details"},"Sunrise: ",t.sunrise.toString()),React.createElement("div",{className:"details"},"Sunset: ",t.sunset.toString())):React.createElement("p",null,"no data to show."))},r=e=>{let{key:t,forecastDay:a}=e;return React.createElement("li",{key:t},React.createElement("div",{className:"forecast-detail"},React.createElement("p",null,React.createElement("strong",null,React.createElement("span",{className:"time"},"Time: ",a.date))),React.createElement("ul",null,React.createElement("li",{className:"condition"}," Condition: ",a.condition),React.createElement("li",{className:"temp"},"Temp: ",(a.high+a.low)/2))))},l=e=>{let{weatherData:t}=e;return React.createElement("div",{className:"forecast"},void 0!==t&&"forecast"in t?React.createElement(React.Fragment,null,React.createElement("h2",null,"Forecast"),React.createElement("ul",null,t.forecast.map(((e,t)=>React.createElement(r,{key:t,forecastDay:e}))))):React.createElement("p",null," No forecast to show"))},s=()=>{const[e,t]=React.useState({});return React.useEffect((()=>{console.log("weatherData changed in the app component."),console.log(e)}),[e]),React.createElement("div",null,React.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark primary-color"},React.createElement("a",{className:"navbar-brand",href:"#"},"Weather App")),React.createElement("div",{className:"container"},React.createElement(n,{setWeatherData:t}),React.createElement("section",{className:"weather-display"},React.createElement(c,{weatherData:e}),React.createElement(l,{weatherData:e}))))};let i=document.querySelector("#react-container");ReactDOM.render(React.createElement(s,null),i)})();